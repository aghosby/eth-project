<div class="page-wrap">

    <div class="admin-heading d-flex justify-content-between align-items-center">
        <h1 class="title xl">Contestants</h1>
    </div>

    <div class="section eth-table">
        <div class="table-container mt-lg-4">
            <div class="table-hdr">
                <div class="title">Contestants <span *ngIf="totalItems > 0" class="count">{{totalItems}}</span></div>

                <div class="input-wrap table-search">
                    <input type="text" [(ngModel)]="searchTerm" (input)="onSearch($event)" class="form-control form-control-md" placeholder="Search by name, or code">
                    <div *ngIf="searchTerm" class="icon" (click)="clearSearch()">&times;</div>
                </div>
            </div>

            <table class="table align-middle mb-0 bg-white">
                <thead class="bg-light">
                    <tr>
                        <ng-container *ngFor = 'let col of tableColumns'>
                            <th [style.width]="col.colWidth">{{col.label}}</th>
                        </ng-container>
                    </tr>
                </thead>

                <tbody>
                    <ng-container *ngFor="let item of tableData; let i = index">
                        <tr>
                            <td>
                                <span class="text-capitalize">{{item?.firstName | lowercase}}</span>
                            </td> 
                            <td>
                                <span class="text-capitalize">{{item?.lastName | lowercase}}</span>
                            </td> 
                            <td>
                                <span >{{item?.contestantNumber}}</span>
                            </td> 
                            <td>
                                <span >{{item?.email}}</span>
                            </td> 
                            <td>
                                <span >{{item?.totalVotes}}</span>
                            </td> 
                            <td>
                                <span >â‚¦{{item?.totalVoteAmount.toLocaleString()}}</span>
                            </td>
                            <td>
                                <span *ngIf="item?.status !== 'active'" class="declined">Inactive</span>
                                <span *ngIf="item?.status === 'active'" class="approved">Active</span>
                            </td> 
                        </tr>
                    </ng-container>
                </tbody>
            </table>

            <!-- use the custom pagination component -->
            <app-pagination
                *ngIf="totalItems > pageSize"
                [currentPage]="currentPage"
                [pageSize]="pageSize"
                [totalItems]="totalItems"
                (pageChange)="onPageChange($event)"
                (pageSizeChange)="onPageSizeChange($event)"
            >
            </app-pagination>

            <div class="d-flex justify-content-center align-items-center py-4" *ngIf="isLoading && tableData.length < 1">
                <span class="loader spinner-border text-primary" style="width: 1.5rem; height: 1.5rem;" role="status"></span>
            </div>
            <div *ngIf="!isLoading && tableData.length == 0" class="empty-state">
                <span><i class="bi bi-folder2-open"></i></span>
                No records were found
            </div>
        </div>
    </div>
</div>